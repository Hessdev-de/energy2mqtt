manufacturer: DZG
model: Modbus
aliases:
  - dzg_dhv4013
registers:
  - name: positive_power
    input_type: Holding
    register: 0
    length: 2
    format: Int32
    scaler: 0.1
    unit_of_measurement: W
    device_class: power
    state_class: measurement

  - name: negative_power
    input_type: Holding
    register: 2
    length: 2
    format: Int32
    scaler: 0.1
    unit_of_measurement: W
    device_class: power
    state_class: measurement

  - name: voltage_l1
    input_type: Holding
    register: 4
    length: 2
    format: Int32
    scaler: 0.01
    unit_of_measurement: V
    device_class: voltage
    state_class: measurement
  
  - name: voltage_l2
    input_type: Holding
    register: 6
    length: 2
    format: Int32
    scaler: 0.01
    unit_of_measurement: V
    device_class: voltage
    state_class: measurement

  - name: voltage_l3
    input_type: Holding
    register: 8
    length: 2
    format: Int32
    scaler: 0.01
    unit_of_measurement: V
    device_class: voltage
    state_class: measurement

  - name: current_l1
    input_type: Holding
    register: 10
    length: 2
    format: Int32
    scaler: 0.001
    unit_of_measurement: A
    device_class: current
    state_class: measurement

  - name: current_l2
    input_type: Holding
    register: 12
    length: 2
    format: Int32
    scaler: 0.001
    unit_of_measurement: A
    device_class: current
    state_class: measurement

  - name: current_l3
    input_type: Holding
    register: 14
    length: 2
    format: Int32
    scaler: 0.001
    unit_of_measurement: A
    device_class: current
    state_class: measurement

  - name: frequency
    input_type: Holding
    register: 18
    length: 2
    format: Int32
    scaler: 0.001
    unit_of_measurement: Hz
    device_class: frequency
    state_class: measurement

  - name: positive_energy
    input_type: Holding
    register: 16384
    length: 2
    format: Int32
    scaler: 1.0
    unit_of_measurement: Wh
    device_class: energy
    state_class: total_increasing

  - name: negative_energy
    input_type: Holding
    register: 16640
    length: 2
    format: Int32
    scaler: 1.0
    unit_of_measurement: Wh
    device_class: energy
    state_class: total_increasing

templates:
  - name: current_all
    value: "current_l1 + current_l3 + current_l3"
    unit_of_measurement: A
    device_class: current
    state_class: measurement
